<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Flash Royale</title>
  <style>
    body { margin:0; font-family:Arial; background:#222; color:white; text-align:center; }
    #menu, #gameCanvas, #charScreen { display:none; }
    button { padding:10px 20px; margin:10px; font-size:18px; cursor:pointer; border:none; border-radius:8px; }
    #gameCanvas { background:#333; display:block; margin:20px auto; border:3px solid #fff; }
  </style>
</head>
<body>

  <h1>‚ö° Flash Royale ‚ö°</h1>

  <div id="menu">
    <button onclick="startGame()">‚ñ∂ Play</button>
    <button onclick="showCharacters()">üë• Characters</button>
    <button onclick="alert('Online mode coming soon!')">üåê Online Battle</button>
  </div>

  <div id="charScreen">
    <h2>Characters</h2>
    <ul id="charList"></ul>
    <button onclick="backToMenu()">‚¨Ö Back</button>
  </div>

  <canvas id="gameCanvas" width="800" height="500"></canvas>
  <button id="exitBtn" style="display:none" onclick="exitGame()">‚¨Ö Exit</button>

  <script>
    // Character Data
    const characters = [
      {name:"Blade Knight", hp:200, dmg:25, type:"melee"},
      {name:"Storm Archer", hp:120, dmg:20, type:"ranged"},
      {name:"Inferno Drake", hp:180, dmg:40, type:"flying"},
      {name:"Rock Golem", hp:350, dmg:15, type:"tank"},
      {name:"Shadow Rogue", hp:100, dmg:30, type:"fast"},
      {name:"Frost Mage", hp:140, dmg:15, type:"magic"},
      {name:"Fire Bomb", hp:0, dmg:50, type:"spell"},
      {name:"Lightning Bolt", hp:0, dmg:70, type:"spell"}
    ];

    const menu = document.getElementById("menu");
    const charScreen = document.getElementById("charScreen");
    const charList = document.getElementById("charList");
    const gameCanvas = document.getElementById("gameCanvas");
    const ctx = gameCanvas.getContext("2d");

    window.onload = () => { menu.style.display="block"; };

    function showCharacters(){
      menu.style.display="none";
      charScreen.style.display="block";
      charList.innerHTML="";
      characters.forEach(c=>{
        let li=document.createElement("li");
        li.textContent = `${c.name} (${c.type}) HP:${c.hp} DMG:${c.dmg}`;
        charList.appendChild(li);
      });
    }
    function backToMenu(){
      charScreen.style.display="none";
      menu.style.display="block";
    }

    // Game Logic
    let towers, units, elixir, gameLoop;

    function startGame(){
      menu.style.display="none";
      gameCanvas.style.display="block";
      document.getElementById("exitBtn").style.display="inline-block";
      towers = [
        {x:100, y:200, hp:300, color:"blue"}, // Player
        {x:650, y:200, hp:300, color:"red"}  // Enemy
      ];
      units = [];
      elixir=0;

      gameLoop = setInterval(update, 50);
    }

    function update(){
      ctx.clearRect(0,0,800,500);

      // Elixir bar
      elixir = Math.min(elixir+0.1,10);
      ctx.fillStyle="purple";
      ctx.fillRect(10,10,elixir*20,20);
      ctx.strokeStyle="white";
      ctx.strokeRect(10,10,200,20);
      ctx.fillStyle="white";
      ctx.fillText("Elixir: "+Math.floor(elixir), 220,25);

      // Towers
      towers.forEach(t=>{
        ctx.fillStyle=t.color;
        ctx.fillRect(t.x,t.y,40,100);
        ctx.fillStyle="white";
        ctx.fillText("HP:"+t.hp, t.x, t.y-10);
      });

      // Units
      units.forEach(u=>{
        ctx.fillStyle=u.color;
        ctx.beginPath();
        ctx.arc(u.x,u.y,10,0,Math.PI*2);
        ctx.fill();

        u.x += u.dir*2; // move
        // Check collision with enemy tower
        let target = towers[u.dir===1?1:0];
        if(Math.abs(u.x-target.x)<30){
          target.hp -= u.dmg;
          u.dead=true;
          if(target.hp<=0){
            alert((u.color==="blue"?"Player":"Enemy")+" wins!");
            exitGame();
          }
        }
      });
      units = units.filter(u=>!u.dead);
    }

    // Spawn unit with key
    document.addEventListener("keydown", e=>{
      if(e.key==="a" && elixir>=3){ spawnUnit("blue",1,25); elixir-=3; }
      if(e.key==="l" && elixir>=3){ spawnUnit("red",-1,25); elixir-=3; }
    });

    function spawnUnit(color,dir,dmg){
      units.push({x:color==="blue"?150:650, y:250, dir:dir, color:color, dmg:dmg, dead:false});
    }

    function exitGame(){
      clearInterval(gameLoop);
      gameCanvas.style.display="none";
      document.getElementById("exitBtn").style.display="none";
      menu.style.display="block";
    }
  </script>
</body>
</html>
